                        };
                        
                        participants = importedData.participants || [];
                        takenNumbers.clear();
                        participants.forEach(p => takenNumbers.add(p.number));
                        
                        if (importedData.raffleTitle) {
                            document.getElementById('mainTitle').textContent = importedData.raffleTitle;
                        }

                        raffleEnded = importedData.raffleEnded || false;

                        if (importedData.settings) {
                            pixKey = importedData.settings.pixKey || pixKey;
                            whatsappNumber = importedData.settings.whatsappNumber || whatsappNumber;
                            minAmount = importedData.settings.minAmount || minAmount;
                            saveSettings();
                        }
                        
                        saveTrackingData();
                        
                        loadSettings();
                        updateAdminContent();
                        updateAdminStats();
                        generateNumbers();

                        document.getElementById('raffleEnded').style.display = raffleEnded ? 'block' : 'none';
                        document.getElementById('numbersContainer').style.display = raffleEnded ? 'none' : 'block';
                        
                        alert(`✅ Dados importados com sucesso!\n\nImportado em: ${new Date(importedData.exportDate).toLocaleString('pt-BR')}`);
                    }
                } catch (error) {
                    alert('❌ Erro ao importar dados. Verifique se o arquivo está correto.');
                }
            };
            reader.readAsText(file);
            
            event.target.value = '';
        }
        window.onclick = function(event) {
            const titleModal = document.getElementById('titleModal');
            const adminModal = document.getElementById('adminModal');
            
            if (event.target === titleModal) {
                closeModal();
            }
            if (event.target === adminModal) {
                closeAdminPanel();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            generateNumbers();
            trackVisit();
        });
    </script>
</body>
</html>
